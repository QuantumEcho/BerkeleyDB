# $Id: Makefile.in,v 11.226 2003/11/28 18:50:05 bostic Exp $

srcdir=	@srcdir@/..
builddir=.

##################################################
# Installation directories and permissions.
##################################################
prefix=	@prefix@
exec_prefix=@exec_prefix@
bindir=	@bindir@
includedir=@includedir@
libdir=	@libdir@
docdir=	$(prefix)/docs

dmode=	755
emode=	555
fmode=	444

transform=@program_transform_name@

##################################################
# Paths for standard user-level commands.
##################################################
SHELL=	@db_cv_path_sh@
ar=	@db_cv_path_ar@
chmod=	@db_cv_path_chmod@
cp=	@db_cv_path_cp@
ln=	@db_cv_path_ln@
mkdir=	@db_cv_path_mkdir@
ranlib=	@db_cv_path_ranlib@
rm=	@db_cv_path_rm@
rpm=	@db_cv_path_rpm@
strip=	@db_cv_path_strip@

##################################################
# General library information.
##################################################
DEF_LIB=	@DEFAULT_LIB@
DEF_LIB_CXX=	@DEFAULT_LIB_CXX@
INSTALLER=	@INSTALLER@
LIBTOOL=	@LIBTOOL@

POSTLINK=	@POSTLINK@
SOLINK=		@MAKEFILE_SOLINK@
SOFLAGS=	@SOFLAGS@
LIBMAJOR=	@DB_VERSION_MAJOR@
LIBVERSION=	@DB_VERSION_MAJOR@.@DB_VERSION_MINOR@

CPPFLAGS=	-I$(builddir) -I$(srcdir) @CPPFLAGS@

##################################################
# C API.
##################################################
CFLAGS=	 	-c $(CPPFLAGS) @CFLAGS@
CC=		@MAKEFILE_CC@
CCLINK=		@MAKEFILE_CCLINK@

LDFLAGS=	@LDFLAGS@
LIBS=		@LIBS@
LIBSO_LIBS=	@LIBSO_LIBS@

libdb_base=	libdb
libdb=		$(libdb_base).a
libdb_version=	$(libdb_base)-$(LIBVERSION).a
libso=		$(libdb_base)-$(LIBVERSION)@SOSUFFIX@
libso_target=	$(libdb_base)-$(LIBVERSION).la
libso_default=	$(libdb_base)@SOSUFFIX@
libso_major=	$(libdb_base)-$(LIBMAJOR)@SOSUFFIX@

##################################################
# C++ API.
#
# C++ support is optional, and can be built with static or shared libraries.
##################################################
CXXFLAGS=	-c $(CPPFLAGS) @CXXFLAGS@
CXX=		@MAKEFILE_CXX@
CXXLINK=	@MAKEFILE_CXXLINK@
XSOLINK=	@MAKEFILE_XSOLINK@
LIBXSO_LIBS=	@LIBXSO_LIBS@

libcxx_base=	libdb_cxx
libcxx=		$(libcxx_base).a
libcxx_version=	$(libcxx_base)-$(LIBVERSION).a
libxso=		$(libcxx_base)-$(LIBVERSION)@SOSUFFIX@
libxso_target=	$(libcxx_base)-$(LIBVERSION).la
libxso_default=	$(libcxx_base)@SOSUFFIX@
libxso_major=	$(libcxx_base)-$(LIBMAJOR)@SOSUFFIX@

##################################################
# Java API.
#
# Java support is optional and requires shared librarires.
##################################################
CLASSPATH=	$(JAVA_CLASSTOP)
LIBJSO_LIBS=	@LIBJSO_LIBS@

JAR=		@JAR@
JAVAC=		env CLASSPATH="$(CLASSPATH)" @JAVAC@
JAVACFLAGS=	@JAVACFLAGS@
JAVA_CLASSTOP=	./classes
JAVA_RPCCLASSTOP=./classes.rpc
JAVA_EXCLASSTOP=./classes.ex
JAVA_SRCDIR=	$(srcdir)/java/src
JAVA_DBREL=	com/sleepycat/db
JAVA_EXREL=	com/sleepycat/examples
JAVA_RPCREL=	com/sleepycat/db/rpcserver
JAVA_EXDIR=	$(srcdir)/examples_java/src/com/sleepycat/examples
JAVA_RPCDIR=	$(srcdir)/rpc_server/java

libj_jarfile=	db.jar
libj_exjarfile=	dbexamples.jar
rpc_jarfile=	dbsvc.jar
libjso_base=	libdb_java
libjso=		$(libjso_base)-$(LIBVERSION)@JMODSUFFIX@
libjso_static=	$(libjso_base)-$(LIBVERSION).a
libjso_target=	$(libjso_base)-$(LIBVERSION).la
libjso_default=	$(libjso_base)@JMODSUFFIX@
libjso_major=	$(libjso_base)-$(LIBMAJOR)@JMODSUFFIX@
libjso_g=	$(libjso_base)-$(LIBVERSION)_g@JMODSUFFIX@

##################################################
# TCL API.
#
# Tcl support is optional and requires shared libraries.
##################################################
TCFLAGS=	@TCFLAGS@
LIBTSO_LIBS=	@LIBTSO_LIBS@
libtso_base=	libdb_tcl
libtso=		$(libtso_base)-$(LIBVERSION)@MODSUFFIX@
libtso_static=	$(libtso_base)-$(LIBVERSION).a
libtso_target=	$(libtso_base)-$(LIBVERSION).la
libtso_default=	$(libtso_base)@MODSUFFIX@
libtso_major=	$(libtso_base)-$(LIBMAJOR)@MODSUFFIX@

##################################################
# db_dump185 UTILITY
#
# The db_dump185 application should be compiled using the system's db.h file
# (which should be a DB 1.85/1.86 include file), and the system's 1.85/1.86
# object library.  To include the right db.h, don't include -I$(builddir) on
# the compile line.  You may also need to add a local include directory and
# local libraries, for example.  Do that by adding -I options to the DB185INC
# line, and -l options to the DB185LIB line.
##################################################
DB185INC=	-c @CFLAGS@ -I$(srcdir) @CPPFLAGS@
DB185LIB=

##################################################
# NOTHING BELOW THIS LINE SHOULD EVER NEED TO BE MODIFIED.
##################################################

##################################################
# Object and utility lists.
##################################################
BTREE_OBJS=\
	bt_compare@o@ bt_conv@o@ bt_curadj@o@ bt_cursor@o@ bt_delete@o@ \
	bt_method@o@ bt_open@o@ bt_put@o@ bt_rec@o@ bt_reclaim@o@ \
	bt_recno@o@ bt_rsearch@o@ bt_search@o@ bt_split@o@ bt_stat@o@ \
	bt_upgrade@o@ btree_auto@o@
BTREE_VRFY_OBJS=\
	db_ovfl_vrfy@o@ db_vrfy@o@ db_vrfyutil@o@ bt_verify@o@
HASH_OBJS=\
	hash@o@ hash_auto@o@ hash_conv@o@ hash_dup@o@ hash_meta@o@ \
	hash_method@o@ hash_open@o@ hash_page@o@ hash_rec@o@ \
	hash_reclaim@o@ hash_stat@o@ hash_upgrade@o@
HASH_VRFY_OBJS=\
	hash_verify@o@
QUEUE_OBJS=\
	qam@o@ qam_auto@o@ qam_conv@o@ qam_files@o@ qam_method@o@ \
	qam_open@o@ qam_rec@o@ qam_stat@o@ qam_upgrade@o@
QUEUE_VRFY_OBJS=\
	qam_verify@o@
REP_OBJS=\
	rep_method@o@ rep_record@o@ rep_region@o@ rep_util@o@

C_OBJS= @ADDITIONAL_OBJS@ @REPLACEMENT_OBJS@ @CRYPTO_OBJS@ @RPC_CLIENT_OBJS@ \
	crdel_auto@o@ crdel_rec@o@ db@o@ db_am@o@ db_auto@o@ \
	db_byteorder@o@ db_cam@o@ db_conv@o@ db_dispatch@o@ db_dup@o@ \
	db_err@o@ db_getlong@o@ db_idspace@o@ db_iface@o@ db_join@o@ \
	db_log2@o@ db_meta@o@ db_method@o@ db_open@o@ db_overflow@o@ \
	db_pr@o@ db_rec@o@ db_reclaim@o@ db_rename@o@ db_remove@o@ \
	db_ret@o@ db_salloc@o@ db_shash@o@ db_truncate@o@ db_upg@o@ \
	db_upg_opd@o@ dbm@o@ dbreg@o@ dbreg_auto@o@ dbreg_rec@o@ \
	dbreg_util@o@ env_file@o@ env_method@o@ env_open@o@ \
	env_recover@o@ env_region@o@ fileops_auto@o@ fop_basic@o@ \
	fop_rec@o@ fop_util@o@ hash_func@o@ hmac@o@ hsearch@o@ lock@o@ \
	lock_deadlock@o@ lock_method@o@ lock_region@o@ lock_stat@o@ \
	lock_util@o@ log@o@ log_archive@o@ log_compare@o@ log_get@o@ \
	log_method@o@ log_put@o@ mp_alloc@o@ mp_bh@o@ mp_fget@o@ \
	mp_fopen@o@ mp_fput@o@ mp_fset@o@ mp_method@o@ mp_region@o@ \
	mp_register@o@ mp_stat@o@ mp_sync@o@ mp_trickle@o@ mutex@o@ \
	os_abs@o@ os_alloc@o@ os_clock@o@ os_config@o@ os_dir@o@ \
	os_errno@o@ os_fid@o@ os_fsync@o@ os_handle@o@ os_id@o@ \
	os_map@o@ os_method@o@ os_oflags@o@ os_open@o@ os_region@o@ \
	os_rename@o@ os_root@o@ os_rpath@o@ os_rw@o@ os_seek@o@ \
	os_sleep@o@ os_spin@o@ os_stat@o@ os_tmpdir@o@ os_unlink@o@ \
	sha1@o@ txn@o@ txn_auto@o@ txn_method@o@ txn_rec@o@ \
	txn_recover@o@ txn_region@o@ txn_stat@o@ txn_util@o@ xa@o@ \
	xa_db@o@ xa_map@o@

CXX_OBJS=\
	cxx_db@o@ cxx_dbc@o@ cxx_dbt@o@ cxx_env@o@ cxx_except@o@ \
	cxx_lock@o@ cxx_logc@o@ cxx_mpool@o@ cxx_txn@o@ cxx_multi@o@

CRYPTO_OBJS=\
	aes_method@o@ crypto@o@ mt19937db@o@ rijndael-alg-fst@o@ \
	rijndael-api-fst@o@

JAVA_OBJS=\
	db_java_wrap@o@

JAVA_SLEEPYCAT=$(JAVA_SRCDIR)/com/sleepycat
JAVA_DBSRCS=\
	$(JAVA_SLEEPYCAT)/bdb/bind/ByteArrayBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/ByteArrayFormat.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/DataBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/DataBuffer.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/DataFormat.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/DataType.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/EntityBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/KeyExtractor.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/SimpleBuffer.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/ClassCatalog.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialFormat.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialInput.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialOutput.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialSerialBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/SerialSerialKeyExtractor.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/TupleSerialBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/TupleSerialKeyExtractor.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/TupleSerialMarshalledBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/serial/TupleSerialMarshalledKeyExtractor.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/MarshalledTupleData.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/MarshalledTupleKeyEntity.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleFormat.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleInput.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleInputBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleMarshalledBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleOutput.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleTupleBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleTupleKeyExtractor.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleTupleMarshalledBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/bind/tuple/TupleTupleMarshalledKeyExtractor.java \
	$(JAVA_SLEEPYCAT)/db/@db_cv_build_type@/DbConstants.java \
	$(JAVA_SLEEPYCAT)/db/db_java.java \
	$(JAVA_SLEEPYCAT)/db/db_javaJNI.java \
	$(JAVA_SLEEPYCAT)/db/Db.java \
	$(JAVA_SLEEPYCAT)/db/DbAppDispatch.java \
	$(JAVA_SLEEPYCAT)/db/DbAppendRecno.java \
	$(JAVA_SLEEPYCAT)/db/DbBtreeCompare.java \
	$(JAVA_SLEEPYCAT)/db/DbBtreePrefix.java \
	$(JAVA_SLEEPYCAT)/db/DbBtreeStat.java \
	$(JAVA_SLEEPYCAT)/db/DbClient.java \
	$(JAVA_SLEEPYCAT)/db/DbDeadlockException.java \
	$(JAVA_SLEEPYCAT)/db/DbDupCompare.java \
	$(JAVA_SLEEPYCAT)/db/DbEnv.java \
	$(JAVA_SLEEPYCAT)/db/DbEnvFeedback.java \
	$(JAVA_SLEEPYCAT)/db/DbEnvFeedbackHandler.java \
	$(JAVA_SLEEPYCAT)/db/DbErrcall.java \
	$(JAVA_SLEEPYCAT)/db/DbErrorHandler.java \
	$(JAVA_SLEEPYCAT)/db/DbException.java \
	$(JAVA_SLEEPYCAT)/db/DbFeedback.java \
	$(JAVA_SLEEPYCAT)/db/DbFeedbackHandler.java \
	$(JAVA_SLEEPYCAT)/db/DbHash.java \
	$(JAVA_SLEEPYCAT)/db/DbHashStat.java \
	$(JAVA_SLEEPYCAT)/db/DbKeyRange.java \
	$(JAVA_SLEEPYCAT)/db/DbLock.java \
	$(JAVA_SLEEPYCAT)/db/DbLockNotGrantedException.java \
	$(JAVA_SLEEPYCAT)/db/DbLockRequest.java \
	$(JAVA_SLEEPYCAT)/db/DbLockStat.java \
	$(JAVA_SLEEPYCAT)/db/DbLogStat.java \
	$(JAVA_SLEEPYCAT)/db/DbLogc.java \
	$(JAVA_SLEEPYCAT)/db/DbLsn.java \
	$(JAVA_SLEEPYCAT)/db/DbMemoryException.java \
	$(JAVA_SLEEPYCAT)/db/DbMpoolFStat.java \
	$(JAVA_SLEEPYCAT)/db/DbMpoolFile.java \
	$(JAVA_SLEEPYCAT)/db/DbMpoolStat.java \
	$(JAVA_SLEEPYCAT)/db/DbMultipleDataIterator.java \
	$(JAVA_SLEEPYCAT)/db/DbMultipleIterator.java \
	$(JAVA_SLEEPYCAT)/db/DbMultipleKeyDataIterator.java \
	$(JAVA_SLEEPYCAT)/db/DbMultipleRecnoDataIterator.java \
	$(JAVA_SLEEPYCAT)/db/DbPanicHandler.java \
	$(JAVA_SLEEPYCAT)/db/DbPreplist.java \
	$(JAVA_SLEEPYCAT)/db/DbQueueStat.java \
	$(JAVA_SLEEPYCAT)/db/DbRepStat.java \
	$(JAVA_SLEEPYCAT)/db/DbRepTransport.java \
	$(JAVA_SLEEPYCAT)/db/DbRunRecoveryException.java \
	$(JAVA_SLEEPYCAT)/db/DbSecondaryKeyCreate.java \
	$(JAVA_SLEEPYCAT)/db/DbTxn.java \
	$(JAVA_SLEEPYCAT)/db/DbTxnStat.java \
	$(JAVA_SLEEPYCAT)/db/DbUtil.java \
	$(JAVA_SLEEPYCAT)/db/Dbc.java \
	$(JAVA_SLEEPYCAT)/db/Dbt.java \
	$(JAVA_SLEEPYCAT)/bdb/CurrentTransaction.java \
	$(JAVA_SLEEPYCAT)/bdb/DataCursor.java \
	$(JAVA_SLEEPYCAT)/bdb/DataDb.java \
	$(JAVA_SLEEPYCAT)/bdb/DataEnvironment.java \
	$(JAVA_SLEEPYCAT)/bdb/DataIndex.java \
	$(JAVA_SLEEPYCAT)/bdb/DataStore.java \
	$(JAVA_SLEEPYCAT)/bdb/DataThang.java \
	$(JAVA_SLEEPYCAT)/bdb/DataView.java \
	$(JAVA_SLEEPYCAT)/bdb/ForeignKeyIndex.java \
	$(JAVA_SLEEPYCAT)/bdb/IntegrityConstraintException.java \
	$(JAVA_SLEEPYCAT)/bdb/KeyRange.java \
	$(JAVA_SLEEPYCAT)/bdb/KeyRangeException.java \
	$(JAVA_SLEEPYCAT)/bdb/PrimaryKeyAssigner.java \
	$(JAVA_SLEEPYCAT)/bdb/RecordNumberBinding.java \
	$(JAVA_SLEEPYCAT)/bdb/RecordNumberFormat.java \
	$(JAVA_SLEEPYCAT)/bdb/StoredClassCatalog.java \
	$(JAVA_SLEEPYCAT)/bdb/TransactionRunner.java \
	$(JAVA_SLEEPYCAT)/bdb/TransactionWorker.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/MapEntry.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredCollection.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredCollections.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredContainer.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredEntrySet.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredIterator.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredKeySet.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredList.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredMap.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredMapEntry.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredSortedEntrySet.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredSortedKeySet.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredSortedMap.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredSortedValueSet.java \
	$(JAVA_SLEEPYCAT)/bdb/collection/StoredValueSet.java \
	$(JAVA_SLEEPYCAT)/bdb/factory/TupleSerialDbFactory.java \
	$(JAVA_SLEEPYCAT)/bdb/util/ExceptionUnwrapper.java \
	$(JAVA_SLEEPYCAT)/bdb/util/ExceptionWrapper.java \
	$(JAVA_SLEEPYCAT)/bdb/util/FastInputStream.java \
	$(JAVA_SLEEPYCAT)/bdb/util/FastOutputStream.java \
	$(JAVA_SLEEPYCAT)/bdb/util/IOExceptionWrapper.java \
	$(JAVA_SLEEPYCAT)/bdb/util/RuntimeExceptionWrapper.java \
	$(JAVA_SLEEPYCAT)/bdb/util/TimeUnits.java \
	$(JAVA_SLEEPYCAT)/bdb/util/UtfOps.java

JAVA_EXSRCS=\
	$(JAVA_EXDIR)/db/AccessExample.java \
	$(JAVA_EXDIR)/db/BtRecExample.java \
	$(JAVA_EXDIR)/db/BulkAccessExample.java \
	$(JAVA_EXDIR)/db/EnvExample.java \
	$(JAVA_EXDIR)/db/LockExample.java \
	$(JAVA_EXDIR)/db/TpcbExample.java \
	$(JAVA_EXDIR)/bdb/access/AccessExample.java \
	$(JAVA_EXDIR)/bdb/helloworld/HelloDatabaseWorld.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/PartValue.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/ShipmentValue.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/SupplierValue.java \
	$(JAVA_EXDIR)/bdb/shipment/basic/Weight.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/Part.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/PartValue.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/Shipment.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/ShipmentValue.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/Supplier.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/SupplierValue.java \
	$(JAVA_EXDIR)/bdb/shipment/entity/Weight.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/Part.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/PartValue.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/Shipment.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/ShipmentValue.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/Supplier.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/SupplierValue.java \
	$(JAVA_EXDIR)/bdb/shipment/tuple/Weight.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/Part.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/Shipment.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/Supplier.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/sentity/Weight.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/MarshalledEntity.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/MarshalledKey.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/Part.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/Shipment.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/Supplier.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/marshal/Weight.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/Part.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/PartKey.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/Sample.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/SampleDatabase.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/SampleViews.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/Shipment.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/ShipmentKey.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/Supplier.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/SupplierKey.java \
	$(JAVA_EXDIR)/bdb/shipment/factory/Weight.java

TCL_OBJS=\
	tcl_compat@o@ tcl_db@o@ tcl_db_pkg@o@ tcl_dbcursor@o@ tcl_env@o@ \
	tcl_internal@o@ tcl_lock@o@ tcl_log@o@ tcl_mp@o@ tcl_rep@o@ \
	tcl_txn@o@ tcl_util@o@

RPC_CLIENT_OBJS=\
	client@o@ db_server_clnt@o@ db_server_xdr@o@ gen_client@o@ \
	gen_client_ret@o@

RPC_SRV_OBJS=\
	db_server_proc@o@ db_server_svc@o@ db_server_util@o@ \
	gen_db_server@o@

RPC_CXXSRV_OBJS=\
	db_server_cxxproc@o@ db_server_cxxutil@o@ db_server_svc@o@ \
	gen_db_server@o@

RPC_JAVASRV_SRCS=\
	$(JAVA_RPCDIR)/DbDispatcher.java \
	$(JAVA_RPCDIR)/DbServer.java \
	$(JAVA_RPCDIR)/FreeList.java \
	$(JAVA_RPCDIR)/LocalIterator.java \
	$(JAVA_RPCDIR)/RpcDb.java \
	$(JAVA_RPCDIR)/RpcDbEnv.java \
	$(JAVA_RPCDIR)/RpcDbTxn.java \
	$(JAVA_RPCDIR)/RpcDbc.java \
	$(JAVA_RPCDIR)/Timer.java \
	$(JAVA_RPCDIR)/gen/DbServerStub.java \
	$(JAVA_RPCDIR)/gen/__db_associate_msg.java \
	$(JAVA_RPCDIR)/gen/__db_associate_reply.java \
	$(JAVA_RPCDIR)/gen/__db_bt_maxkey_msg.java \
	$(JAVA_RPCDIR)/gen/__db_bt_maxkey_reply.java \
	$(JAVA_RPCDIR)/gen/__db_bt_minkey_msg.java \
	$(JAVA_RPCDIR)/gen/__db_bt_minkey_reply.java \
	$(JAVA_RPCDIR)/gen/__db_close_msg.java \
	$(JAVA_RPCDIR)/gen/__db_close_reply.java \
	$(JAVA_RPCDIR)/gen/__db_create_msg.java \
	$(JAVA_RPCDIR)/gen/__db_create_reply.java \
	$(JAVA_RPCDIR)/gen/__db_cursor_msg.java \
	$(JAVA_RPCDIR)/gen/__db_cursor_reply.java \
	$(JAVA_RPCDIR)/gen/__db_del_msg.java \
	$(JAVA_RPCDIR)/gen/__db_del_reply.java \
	$(JAVA_RPCDIR)/gen/__db_encrypt_msg.java \
	$(JAVA_RPCDIR)/gen/__db_encrypt_reply.java \
	$(JAVA_RPCDIR)/gen/__db_extentsize_msg.java \
	$(JAVA_RPCDIR)/gen/__db_extentsize_reply.java \
	$(JAVA_RPCDIR)/gen/__db_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__db_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_bt_minkey_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_bt_minkey_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_encrypt_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_encrypt_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_extentsize_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_extentsize_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_h_ffactor_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_h_ffactor_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_h_nelem_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_h_nelem_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_lorder_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_lorder_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_name_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_name_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_open_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_open_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_pagesize_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_pagesize_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_delim_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_delim_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_len_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_len_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_pad_msg.java \
	$(JAVA_RPCDIR)/gen/__db_get_re_pad_reply.java \
	$(JAVA_RPCDIR)/gen/__db_get_reply.java \
	$(JAVA_RPCDIR)/gen/__db_h_ffactor_msg.java \
	$(JAVA_RPCDIR)/gen/__db_h_ffactor_reply.java \
	$(JAVA_RPCDIR)/gen/__db_h_nelem_msg.java \
	$(JAVA_RPCDIR)/gen/__db_h_nelem_reply.java \
	$(JAVA_RPCDIR)/gen/__db_join_msg.java \
	$(JAVA_RPCDIR)/gen/__db_join_reply.java \
	$(JAVA_RPCDIR)/gen/__db_key_range_msg.java \
	$(JAVA_RPCDIR)/gen/__db_key_range_reply.java \
	$(JAVA_RPCDIR)/gen/__db_lorder_msg.java \
	$(JAVA_RPCDIR)/gen/__db_lorder_reply.java \
	$(JAVA_RPCDIR)/gen/__db_open_msg.java \
	$(JAVA_RPCDIR)/gen/__db_open_reply.java \
	$(JAVA_RPCDIR)/gen/__db_pagesize_msg.java \
	$(JAVA_RPCDIR)/gen/__db_pagesize_reply.java \
	$(JAVA_RPCDIR)/gen/__db_pget_msg.java \
	$(JAVA_RPCDIR)/gen/__db_pget_reply.java \
	$(JAVA_RPCDIR)/gen/__db_put_msg.java \
	$(JAVA_RPCDIR)/gen/__db_put_reply.java \
	$(JAVA_RPCDIR)/gen/__db_re_delim_msg.java \
	$(JAVA_RPCDIR)/gen/__db_re_delim_reply.java \
	$(JAVA_RPCDIR)/gen/__db_re_len_msg.java \
	$(JAVA_RPCDIR)/gen/__db_re_len_reply.java \
	$(JAVA_RPCDIR)/gen/__db_re_pad_msg.java \
	$(JAVA_RPCDIR)/gen/__db_re_pad_reply.java \
	$(JAVA_RPCDIR)/gen/__db_remove_msg.java \
	$(JAVA_RPCDIR)/gen/__db_remove_reply.java \
	$(JAVA_RPCDIR)/gen/__db_rename_msg.java \
	$(JAVA_RPCDIR)/gen/__db_rename_reply.java \
	$(JAVA_RPCDIR)/gen/__db_stat_msg.java \
	$(JAVA_RPCDIR)/gen/__db_stat_reply.java \
	$(JAVA_RPCDIR)/gen/__db_sync_msg.java \
	$(JAVA_RPCDIR)/gen/__db_sync_reply.java \
	$(JAVA_RPCDIR)/gen/__db_truncate_msg.java \
	$(JAVA_RPCDIR)/gen/__db_truncate_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_close_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_close_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_count_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_count_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_del_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_del_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_dup_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_dup_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_get_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_get_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_pget_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_pget_reply.java \
	$(JAVA_RPCDIR)/gen/__dbc_put_msg.java \
	$(JAVA_RPCDIR)/gen/__dbc_put_reply.java \
	$(JAVA_RPCDIR)/gen/__env_cachesize_msg.java \
	$(JAVA_RPCDIR)/gen/__env_cachesize_reply.java \
	$(JAVA_RPCDIR)/gen/__env_close_msg.java \
	$(JAVA_RPCDIR)/gen/__env_close_reply.java \
	$(JAVA_RPCDIR)/gen/__env_create_msg.java \
	$(JAVA_RPCDIR)/gen/__env_create_reply.java \
	$(JAVA_RPCDIR)/gen/__env_dbremove_msg.java \
	$(JAVA_RPCDIR)/gen/__env_dbremove_reply.java \
	$(JAVA_RPCDIR)/gen/__env_dbrename_msg.java \
	$(JAVA_RPCDIR)/gen/__env_dbrename_reply.java \
	$(JAVA_RPCDIR)/gen/__env_encrypt_msg.java \
	$(JAVA_RPCDIR)/gen/__env_encrypt_reply.java \
	$(JAVA_RPCDIR)/gen/__env_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__env_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__env_get_cachesize_msg.java \
	$(JAVA_RPCDIR)/gen/__env_get_cachesize_reply.java \
	$(JAVA_RPCDIR)/gen/__env_get_encrypt_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__env_get_encrypt_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__env_get_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__env_get_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__env_get_home_msg.java \
	$(JAVA_RPCDIR)/gen/__env_get_home_reply.java \
	$(JAVA_RPCDIR)/gen/__env_get_open_flags_msg.java \
	$(JAVA_RPCDIR)/gen/__env_get_open_flags_reply.java \
	$(JAVA_RPCDIR)/gen/__env_open_msg.java \
	$(JAVA_RPCDIR)/gen/__env_open_reply.java \
	$(JAVA_RPCDIR)/gen/__env_remove_msg.java \
	$(JAVA_RPCDIR)/gen/__env_remove_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_abort_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_abort_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_begin_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_begin_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_commit_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_commit_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_discard_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_discard_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_prepare_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_prepare_reply.java \
	$(JAVA_RPCDIR)/gen/__txn_recover_msg.java \
	$(JAVA_RPCDIR)/gen/__txn_recover_reply.java \
	$(JAVA_RPCDIR)/gen/db_server.java

UTIL_PROGS=\
	@ADDITIONAL_PROGS@ \
	db_archive db_checkpoint db_deadlock \
	db_dump db_load db_printlog db_recover db_stat db_upgrade db_verify

##################################################
# List of files installed into the library directory.
##################################################
LIB_INSTALL_FILE_LIST=\
	$(libdb) \
	$(libso) \
	$(libso_default) \
	$(libso_major) \
	$(libdb_version) \
	$(libso_target) \
	$(libcxx) \
	$(libxso) \
	$(libxso_default) \
	$(libxso_major) \
	$(libcxx_version) \
	$(libxso_target) \
	$(libtso) \
	$(libtso_default) \
	$(libtso_major) \
	$(libtso_static) \
	$(libtso_target) \
	$(libjso) \
	$(libjso_default) \
	$(libjso_g) \
	$(libjso_major) \
	$(libjso_static) \
	$(libjso_target) \
	$(libj_exjarfile) \
	$(libj_jarfile)

##################################################
# We're building a standard library or a RPM file hierarchy.
# Note: "all" must be the first target in the Makefile.
##################################################
all: @BUILD_TARGET@

install-strip install: all @INSTALL_TARGET@

##################################################
# Library and standard utilities build.
##################################################
library_build: @INSTALL_LIBS@ @ADDITIONAL_LANG@ $(UTIL_PROGS)

# Static C library named libdb.a.
$(libdb): $(DEF_LIB)
	$(rm) -f $@
	test ! -f .libs/$(libdb_version) || \
		$(ln) -s .libs/$(libdb_version) $@
	test -f .libs/$(libdb_version) || \
		(test -f $(libdb_version) && $(ln) -s $(libdb_version) $@)

# Real static C library.
$(libdb_version): $(C_OBJS)
	$(ar) cr $@ $(C_OBJS)
	test ! -f $(ranlib) || $(ranlib) $@

# Shared C library.
$(libso_target): $(C_OBJS)
	$(SOLINK) $(SOFLAGS) $(LDFLAGS) -o $@ $(C_OBJS) $(LIBSO_LIBS)

# Static C++ library named libdb_cxx.a.
$(libcxx): $(DEF_LIB_CXX)
	$(rm) -f $@
	test ! -f .libs/$(libcxx_version) || \
		$(ln) -s .libs/$(libcxx_version) $@
	test -f .libs/$(libcxx_version) || \
		(test -f $(libcxx_version) && $(ln) -s $(libcxx_version) $@)

# Real static C++ library.
$(libcxx_version): $(CXX_OBJS) $(C_OBJS)
	$(ar) cr $@ $(CXX_OBJS) $(C_OBJS)
	test ! -f $(ranlib) || $(ranlib) $@

# Shared C++ library.
$(libxso_target): $(CXX_OBJS) $(C_OBJS)
	$(XSOLINK) $(SOFLAGS) $(LDFLAGS) \
	    -o $@ $(CXX_OBJS) $(C_OBJS) $(LIBXSO_LIBS)

# Shared Java library.
$(libjso_target): $(JAVA_OBJS) $(C_OBJS)
	$(SOLINK) -shrext @JMODSUFFIX@ $(SOFLAGS) $(LDFLAGS) \
	    -o $@ $(JAVA_OBJS) $(C_OBJS) $(LIBJSO_LIBS)

# Shared Tcl library.
$(libtso_target): $(TCL_OBJS) $(C_OBJS)
	$(SOLINK) @LIBTSO_MODULE@ $(SOFLAGS) $(LDFLAGS) \
	    -o $@ $(TCL_OBJS) $(C_OBJS) $(LIBTSO_LIBS)

##################################################
# Creating individual dependencies and actions for building class
# files is possible, but it is very messy and error prone.
##################################################
java:	$(libj_jarfile) $(libj_exjarfile)

$(libj_jarfile): $(JAVA_DBSRCS)
	@test -d $(JAVA_CLASSTOP) || \
	   ($(mkdir) -p $(JAVA_CLASSTOP) && $(chmod) $(dmode) $(JAVA_CLASSTOP))
	$(JAVAC) -d $(JAVA_CLASSTOP) $(JAVACFLAGS) $(JAVA_DBSRCS)
	cd $(JAVA_CLASSTOP) && $(JAR) cf ../$(libj_jarfile) ./com/sleepycat

$(libj_exjarfile): $(libj_jarfile) $(JAVA_EXSRCS)
	@test -d $(JAVA_EXCLASSTOP) || \
	   ($(mkdir) -p $(JAVA_EXCLASSTOP) && \
		$(chmod) $(dmode) $(JAVA_EXCLASSTOP))
	$(JAVAC) -classpath $(libj_jarfile) -d $(JAVA_EXCLASSTOP) \
		$(JAVACFLAGS) $(JAVA_EXSRCS)
	cd $(JAVA_EXCLASSTOP) && $(JAR) cf ../$(libj_exjarfile) .

$(rpc_jarfile): $(libj_jarfile) $(RPC_JAVASRV_SRCS)
	@test -d $(JAVA_RPCCLASSTOP) || \
	   ($(mkdir) -p $(JAVA_RPCCLASSTOP) && \
	       $(chmod) $(dmode) $(JAVA_RPCCLASSTOP))
	env CLASSPATH=$(CLASSPATH):$(JAVA_RPCDIR)/oncrpc.jar \
	    @JAVAC@ -d $(JAVA_RPCCLASSTOP) $(JAVACFLAGS) $(RPC_JAVASRV_SRCS)
	cd $(JAVA_RPCCLASSTOP) && $(JAR) cf ../$(rpc_jarfile) $(JAVA_RPCREL)

##################################################
# Utilities
##################################################
berkeley_db_svc: $(RPC_SRV_OBJS) util_log@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    $(RPC_SRV_OBJS) util_log@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

berkeley_db_cxxsvc: $(RPC_CXXSRV_OBJS) util_log@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) \
	    $(RPC_CXXSRV_OBJS) util_log@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

berkeley_db_javasvc: $(rpc_jarfile)
	echo > $@ "#!/bin/sh"
	echo >> $@ CLASSPATH="$(CLASSPATH):$(rpc_jarfile):$(JAVA_RPCDIR)/oncrpc.jar"
	echo >> $@ LD_LIBRARY_PATH=.libs
	echo >> $@ export CLASSPATH LD_LIBRARY_PATH
	echo >> $@ exec java com.sleepycat.db.rpcserver.DbServer \$$@
	chmod +x $@

db_archive: db_archive@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_archive@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_checkpoint: db_checkpoint@o@ util_log@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_checkpoint@o@ util_log@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_deadlock: db_deadlock@o@ util_log@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_deadlock@o@ util_log@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_dump: db_dump@o@ util_cache@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_dump@o@ util_cache@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_dump185: db_dump185@o@ @REPLACEMENT_OBJS@
	$(CCLINK) -o $@ $(LDFLAGS) db_dump185@o@ @REPLACEMENT_OBJS@ $(DB185LIB)
	$(POSTLINK) $@

db_load: db_load@o@ util_cache@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_load@o@ util_cache@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_printlog: db_printlog@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_printlog@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_recover: db_recover@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_recover@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_stat: db_stat@o@ util_cache@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_stat@o@ util_cache@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_upgrade: db_upgrade@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_upgrade@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

db_verify: db_verify@o@ util_cache@o@ util_sig@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) \
	    db_verify@o@ util_cache@o@ util_sig@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

##################################################
# Library and standard utilities install.
##################################################
library_install: install_setup
library_install: install_include install_lib install_utilities install_docs

uninstall: uninstall_include uninstall_lib uninstall_utilities uninstall_docs

install_setup:
	@test -d $(DESTDIR)$(prefix) || \
	    ($(mkdir) -p $(DESTDIR)$(prefix) && \
	    $(chmod) $(dmode) $(DESTDIR)$(prefix))

INCDOT=	db.h db_cxx.h @ADDITIONAL_INCS@
install_include:
	@echo "Installing DB include files: $(DESTDIR)$(includedir) ..."
	@test -d $(DESTDIR)$(includedir) || \
	    ($(mkdir) -p $(DESTDIR)$(includedir) && \
	    $(chmod) $(dmode) $(DESTDIR)$(includedir))
	@cd $(DESTDIR)$(includedir) && $(rm) -f $(INCDOT)
	@$(cp) -p $(INCDOT) $(DESTDIR)$(includedir)
	@cd $(DESTDIR)$(includedir) && $(chmod) $(fmode) $(INCDOT)

uninstall_include:
	@cd $(DESTDIR)$(includedir) && $(rm) -f $(INCDOT)

install_lib:
	@echo "Installing DB library: $(DESTDIR)$(libdir) ..."
	@test -d $(DESTDIR)$(libdir) || \
	    ($(mkdir) -p $(DESTDIR)$(libdir) && \
	    $(chmod) $(dmode) $(DESTDIR)$(libdir))
	@cd $(DESTDIR)$(libdir) && $(rm) -f $(LIB_INSTALL_FILE_LIST)
	@$(INSTALLER) @INSTALL_LIBS@ $(DESTDIR)$(libdir)
	@(cd $(DESTDIR)$(libdir) && \
	    test -f $(libso) && $(ln) -s $(libso) $(libso_default); \
	    test -f $(libso) && $(ln) -s $(libso) $(libso_major); \
	    test -f $(libxso) && $(ln) -s $(libxso) $(libxso_default); \
	    test -f $(libxso) && $(ln) -s $(libxso) $(libxso_major); \
	    test -f $(libtso) && $(ln) -s $(libtso) $(libtso_default); \
	    test -f $(libtso) && $(ln) -s $(libtso) $(libtso_major); \
	    test -f $(libjso) && $(ln) -s $(libjso) $(libjso_default); \
	    test -f $(libjso) && $(ln) -s $(libjso) $(libjso_major); \
	    test -f $(libjso) && $(ln) -s $(libjso) $(libjso_g)) || true
	@(test -f $(libj_jarfile) && \
	    $(cp) $(libj_jarfile) $(DESTDIR)$(libdir) && \
	    $(chmod) $(fmode) $(DESTDIR)$(libdir)/$(libj_jarfile)) || true

uninstall_lib:
	@cd $(DESTDIR)$(libdir) && $(rm) -f $(LIB_INSTALL_FILE_LIST)

install_utilities:
	@echo "Installing DB utilities: $(DESTDIR)$(bindir) ..."
	@test -d $(DESTDIR)$(bindir) || \
	    ($(mkdir) -p $(DESTDIR)$(bindir) && \
	    $(chmod) $(dmode) $(DESTDIR)$(bindir))
	@for i in $(UTIL_PROGS); do \
		$(rm) -f $(DESTDIR)$(bindir)/$$i $(DESTDIR)$(bindir)/$$i.exe; \
		test -f $$i.exe && i=$$i.exe || true; \
		$(INSTALLER) $$i $(DESTDIR)$(bindir)/$$i; \
		test -f $(strip) && $(strip) $(DESTDIR)$(bindir)/$$i || true; \
		$(chmod) $(emode) $(DESTDIR)$(bindir)/$$i; \
	done

uninstall_utilities:
	@(cd $(DESTDIR)$(bindir); for i in $(UTIL_PROGS); do \
		$(rm) -f $$i $$i.exe; \
	done)

DOCLIST=api_c api_cxx api_tcl images index.html java ref sleepycat utility
install_docs:
	@echo "Installing documentation: $(DESTDIR)$(docdir) ..."
	@test -d $(DESTDIR)$(docdir) || \
	    ($(mkdir) -p $(DESTDIR)$(docdir) && \
	    $(chmod) $(dmode) $(DESTDIR)$(docdir))
	@cd $(DESTDIR)$(docdir) && $(rm) -rf $(DOCLIST)
	@cd $(srcdir)/docs && $(cp) -pr $(DOCLIST) $(DESTDIR)$(docdir)/

uninstall_docs:
	@cd $(docdir) && $(rm) -rf $(DESTDIR)$(DOCLIST)

##################################################
# RPM, build and install.
##################################################
rpm_build:
	@test -f @db_cv_path_rpm_archive@ || \
	    (echo "@db_cv_path_rpm_archive@: archive file not found" && false)
	@$(rm) -rf BUILD RPMS SOURCES SPECS SRPMS RPM_INSTALL
	@$(mkdir) -p BUILD && $(chmod) $(dmode) BUILD
	@$(mkdir) -p RPMS/i386 && $(chmod) $(dmode) RPMS RPMS/i386
	@$(mkdir) -p SOURCES && $(chmod) $(dmode) SOURCES
	@$(mkdir) -p SPECS && $(chmod) $(dmode) SPECS
	@$(mkdir) -p SRPMS && $(chmod) $(dmode) SRPMS
	$(cp) @db_cv_path_rpm_archive@ SOURCES/
	$(cp) db.spec SPECS/db.spec
	@RPM_BUILD@ --define="`cat rpm-macro-defines`" -ba SPECS/db.spec

rpm_install:

RPM_SRPMS=db-@DB_VERSION_MAJOR@.@DB_VERSION_MINOR@.@DB_VERSION_PATCH@-1.src.rpm

##################################################
# Remaining standard Makefile targets.
##################################################
CLEAN_LIST=\
	berkeley_db_svc berkeley_db_cxxsvc berkeley_db_javasvc \
	db_dump185 db_perf dbs bench_001 \
	ex_access ex_apprec ex_btrec ex_dbclient ex_env ex_lock ex_mpool \
	ex_repquote ex_thread ex_tpcb excxx_access excxx_btrec excxx_env \
	excxx_lock excxx_mpool excxx_tpcb rpmrc

mostly-clean clean:
	$(rm) -rf $(C_OBJS)
	$(rm) -rf $(CXX_OBJS) $(JAVA_OBJS) $(TCL_OBJS)
	$(rm) -rf $(RPC_CLIENT_OBJS) $(RPC_SRV_OBJS) $(RPC_CXXSRV_OBJS)
	$(rm) -rf $(UTIL_PROGS) *.exe $(CLEAN_LIST)
	$(rm) -rf $(JAVA_CLASSTOP) $(JAVA_EXCLASSTOP)
	$(rm) -rf $(JAVA_RPCCLASSES) $(rpc_jarfile)
	$(rm) -rf tags *@o@ *.o *.o.lock *.lo core *.core
	$(rm) -rf ALL.OUT.* BUILD PARALLEL_TESTDIR.* RPMS RPM_INSTALL
	$(rm) -rf RUN_LOG RUNQUEUE SOURCES SPECS SRPMS TESTDIR TESTDIR.A
	$(rm) -rf TEST.LIST logtrack_seen.db tm .libs $(LIB_INSTALL_FILE_LIST)

REALCLEAN_LIST=\
	Makefile confdefs.h config.cache config.log config.status \
	configure.lineno db.h db.spec db185_int.h db_185.h db_config.h \
	db_cxx.h db_int.h db_int_def.h include.tcl rpm-macro-defines win_db.h

distclean maintainer-clean realclean: clean
	$(rm) -rf $(REALCLEAN_LIST)
	$(rm) -rf libtool

check depend dvi info obj TAGS:
	@echo "$@: make target not supported" && true

dist:
	@echo "$@: make target not supported" && false

##################################################
# Multi-threaded testers, benchmarks.
##################################################
dbs@o@: $(srcdir)/test_server/dbs.c
	$(CC) $(CFLAGS) $?
dbs_am@o@: $(srcdir)/test_server/dbs_am.c
	$(CC) $(CFLAGS) $?
dbs_checkpoint@o@: $(srcdir)/test_server/dbs_checkpoint.c
	$(CC) $(CFLAGS) $?
dbs_debug@o@: $(srcdir)/test_server/dbs_debug.c
	$(CC) $(CFLAGS) $?
dbs_handles@o@: $(srcdir)/test_server/dbs_handles.c
	$(CC) $(CFLAGS) $?
dbs_log@o@: $(srcdir)/test_server/dbs_log.c
	$(CC) $(CFLAGS) $?
dbs_qam@o@: $(srcdir)/test_server/dbs_qam.c
	$(CC) $(CFLAGS) $?
dbs_spawn@o@: $(srcdir)/test_server/dbs_spawn.c
	$(CC) $(CFLAGS) $?
dbs_trickle@o@: $(srcdir)/test_server/dbs_trickle.c
	$(CC) $(CFLAGS) $?
dbs_util@o@: $(srcdir)/test_server/dbs_util.c
	$(CC) $(CFLAGS) $?
dbs_yield@o@: $(srcdir)/test_server/dbs_yield.c
	$(CC) $(CFLAGS) $?
DBS_OBJS=\
	dbs@o@ dbs_am@o@ dbs_checkpoint@o@ dbs_debug@o@ dbs_handles@o@ \
	dbs_log@o@ dbs_qam@o@ dbs_spawn@o@ dbs_trickle@o@ dbs_util@o@ \
	dbs_yield@o@
dbs: $(DBS_OBJS) $(DEF_LIB)
	$(CCLINK) -o $@ \
	    $(LDFLAGS) $(DBS_OBJS) $(DEF_LIB) @LOAD_LIBS@ $(LIBS)
	$(POSTLINK) $@

db_perf@o@: $(srcdir)/test_perf/db_perf.c
	$(CC) $(CFLAGS) $?
perf_checkpoint@o@: $(srcdir)/test_perf/perf_checkpoint.c
	$(CC) $(CFLAGS) $?
perf_config@o@: $(srcdir)/test_perf/perf_config.c
	$(CC) $(CFLAGS) $?
perf_dbs@o@: $(srcdir)/test_perf/perf_dbs.c
	$(CC) $(CFLAGS) $?
perf_dead@o@: $(srcdir)/test_perf/perf_dead.c
	$(CC) $(CFLAGS) $?
perf_debug@o@: $(srcdir)/test_perf/perf_debug.c
	$(CC) $(CFLAGS) $?
perf_file@o@: $(srcdir)/test_perf/perf_file.c
	$(CC) $(CFLAGS) $?
perf_key@o@: $(srcdir)/test_perf/perf_key.c
	$(CC) $(CFLAGS) $?
perf_log@o@: $(srcdir)/test_perf/perf_log.c
	$(CC) $(CFLAGS) $?
perf_misc@o@: $(srcdir)/test_perf/perf_misc.c
	$(CC) $(CFLAGS) $?
perf_op@o@: $(srcdir)/test_perf/perf_op.c
	$(CC) $(CFLAGS) $?
perf_parse@o@: $(srcdir)/test_perf/perf_parse.c
	$(CC) $(CFLAGS) $?
perf_rand@o@: $(srcdir)/test_perf/perf_rand.c
	$(CC) $(CFLAGS) $?
perf_spawn@o@: $(srcdir)/test_perf/perf_spawn.c
	$(CC) $(CFLAGS) $?
perf_stat@o@: $(srcdir)/test_perf/perf_stat.c
	$(CC) $(CFLAGS) $?
perf_sync@o@: $(srcdir)/test_perf/perf_sync.c
	$(CC) $(CFLAGS) $?
perf_thread@o@: $(srcdir)/test_perf/perf_thread.c
	$(CC) $(CFLAGS) $?
perf_trickle@o@: $(srcdir)/test_perf/perf_trickle.c
	$(CC) $(CFLAGS) $?
perf_txn@o@: $(srcdir)/test_perf/perf_txn.c
	$(CC) $(CFLAGS) $?
perf_util@o@: $(srcdir)/test_perf/perf_util.c
	$(CC) $(CFLAGS) $?
perf_vx@o@: $(srcdir)/test_perf/perf_vx.c
	$(CC) $(CFLAGS) $?
DBPERF_OBJS=\
	db_perf@o@ perf_checkpoint@o@ perf_config@o@ perf_dbs@o@ \
	perf_dead@o@ perf_debug@o@ perf_file@o@ perf_key@o@ perf_log@o@ \
	perf_misc@o@ perf_op@o@ perf_parse@o@ perf_rand@o@ perf_spawn@o@ \
	perf_stat@o@ perf_sync@o@ perf_thread@o@ perf_trickle@o@ \
	perf_txn@o@ perf_util@o@ perf_vx@o@

db_perf: $(DBPERF_OBJS) $(DEF_LIB)
	$(CCLINK) -o $@ \
	    $(LDFLAGS) $(DBPERF_OBJS) $(DEF_LIB) @LOAD_LIBS@ $(LIBS)
	$(POSTLINK) $@

tm@o@: $(srcdir)/mutex/tm.c
	$(CC) $(CFLAGS) $?
tm: tm@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) tm@o@ $(DEF_LIB) @LOAD_LIBS@ $(LIBS)
	$(POSTLINK) $@

##################################################
# Example programs for C.
##################################################
bench_001@o@: $(srcdir)/examples_c/bench_001.c
	$(CC) $(CFLAGS) $?
bench_001: bench_001@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) bench_001@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_access@o@: $(srcdir)/examples_c/ex_access.c
	$(CC) $(CFLAGS) $?
ex_access: ex_access@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_access@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_apprec@o@: $(srcdir)/examples_c/ex_apprec/ex_apprec.c
	$(CC) $(CFLAGS) $?
ex_apprec_auto@o@: $(srcdir)/examples_c/ex_apprec/ex_apprec_auto.c
	$(CC) $(CFLAGS) $?
ex_apprec_rec@o@: $(srcdir)/examples_c/ex_apprec/ex_apprec_rec.c
	$(CC) $(CFLAGS) $?
EX_APPREC_OBJS=ex_apprec@o@ ex_apprec_auto@o@ ex_apprec_rec@o@
ex_apprec: $(EX_APPREC_OBJS) $(DEF_LIB)
	$(CCLINK) -o $@ \
	    $(LDFLAGS) $(EX_APPREC_OBJS) $(DEF_LIB) @LOAD_LIBS@ $(LIBS)

ex_btrec@o@: $(srcdir)/examples_c/ex_btrec.c
	$(CC) $(CFLAGS) $?
ex_btrec: ex_btrec@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_btrec@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_dbclient@o@: $(srcdir)/examples_c/ex_dbclient.c
	$(CC) $(CFLAGS) $?
ex_dbclient: ex_dbclient@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_dbclient@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_env@o@: $(srcdir)/examples_c/ex_env.c
	$(CC) $(CFLAGS) $?
ex_env: ex_env@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_env@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_lock@o@: $(srcdir)/examples_c/ex_lock.c
	$(CC) $(CFLAGS) $?
ex_lock: ex_lock@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_lock@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_mpool@o@: $(srcdir)/examples_c/ex_mpool.c
	$(CC) $(CFLAGS) $?
ex_mpool: ex_mpool@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_mpool@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

ex_rq_client@o@: $(srcdir)/examples_c/ex_repquote/ex_rq_client.c
	$(CC) $(CFLAGS) $?
ex_rq_main@o@:	$(srcdir)/examples_c/ex_repquote/ex_rq_main.c
	$(CC) $(CFLAGS) $?
ex_rq_master@o@: $(srcdir)/examples_c/ex_repquote/ex_rq_master.c
	$(CC) $(CFLAGS) $?
ex_rq_net@o@: $(srcdir)/examples_c/ex_repquote/ex_rq_net.c
	$(CC) $(CFLAGS) $?
ex_rq_util@o@: $(srcdir)/examples_c/ex_repquote/ex_rq_util.c
	$(CC) $(CFLAGS) $?
EX_RQ_OBJS=\
	ex_rq_client@o@ ex_rq_main@o@ ex_rq_master@o@ ex_rq_net@o@ ex_rq_util@o@
ex_repquote: $(EX_RQ_OBJS) $(DEF_LIB)
	$(CCLINK) -o $@ \
	    $(LDFLAGS) $(EX_RQ_OBJS) $(DEF_LIB) @LOAD_LIBS@ $(LIBS)
	$(POSTLINK) $@

ex_thread@o@: $(srcdir)/examples_c/ex_thread.c
	$(CC) $(CFLAGS) $?
ex_thread: ex_thread@o@ $(DEF_LIB)
	$(CCLINK) -o $@ \
	    $(LDFLAGS) ex_thread@o@ $(DEF_LIB) @LOAD_LIBS@ $(LIBS)
	$(POSTLINK) $@

ex_tpcb@o@: $(srcdir)/examples_c/ex_tpcb.c
	$(CC) $(CFLAGS) $?
ex_tpcb: ex_tpcb@o@ $(DEF_LIB)
	$(CCLINK) -o $@ $(LDFLAGS) ex_tpcb@o@ $(DEF_LIB) $(LIBS)
	$(POSTLINK) $@

##################################################
# Example programs for C++.
##################################################
AccessExample@o@: $(srcdir)/examples_cxx/AccessExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_access: AccessExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) AccessExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

BtRecExample@o@: $(srcdir)/examples_cxx/BtRecExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_btrec: BtRecExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) BtRecExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

EnvExample@o@: $(srcdir)/examples_cxx/EnvExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_env: EnvExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) EnvExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

LockExample@o@: $(srcdir)/examples_cxx/LockExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_lock: LockExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) LockExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

MpoolExample@o@: $(srcdir)/examples_cxx/MpoolExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_mpool: MpoolExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) MpoolExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

TpcbExample@o@: $(srcdir)/examples_cxx/TpcbExample.cpp
	$(CXX) $(CXXFLAGS) $?
excxx_tpcb: TpcbExample@o@ $(DEF_LIB_CXX)
	$(CXXLINK) -o $@ $(LDFLAGS) TpcbExample@o@ $(DEF_LIB_CXX) $(LIBS)
	$(POSTLINK) $@

##################################################
# C API build rules.
##################################################
aes_method@o@: $(srcdir)/crypto/aes_method.c
	 $(CC) $(CFLAGS) $?
bt_compare@o@: $(srcdir)/btree/bt_compare.c
	 $(CC) $(CFLAGS) $?
bt_conv@o@: $(srcdir)/btree/bt_conv.c
	 $(CC) $(CFLAGS) $?
bt_curadj@o@: $(srcdir)/btree/bt_curadj.c
	 $(CC) $(CFLAGS) $?
bt_cursor@o@: $(srcdir)/btree/bt_cursor.c
	 $(CC) $(CFLAGS) $?
bt_delete@o@: $(srcdir)/btree/bt_delete.c
	 $(CC) $(CFLAGS) $?
bt_method@o@: $(srcdir)/btree/bt_method.c
	 $(CC) $(CFLAGS) $?
bt_open@o@: $(srcdir)/btree/bt_open.c
	 $(CC) $(CFLAGS) $?
bt_put@o@: $(srcdir)/btree/bt_put.c
	 $(CC) $(CFLAGS) $?
bt_rec@o@: $(srcdir)/btree/bt_rec.c
	 $(CC) $(CFLAGS) $?
bt_reclaim@o@: $(srcdir)/btree/bt_reclaim.c
	 $(CC) $(CFLAGS) $?
bt_recno@o@: $(srcdir)/btree/bt_recno.c
	 $(CC) $(CFLAGS) $?
bt_rsearch@o@: $(srcdir)/btree/bt_rsearch.c
	 $(CC) $(CFLAGS) $?
bt_search@o@: $(srcdir)/btree/bt_search.c
	 $(CC) $(CFLAGS) $?
bt_split@o@: $(srcdir)/btree/bt_split.c
	 $(CC) $(CFLAGS) $?
bt_stat@o@: $(srcdir)/btree/bt_stat.c
	 $(CC) $(CFLAGS) $?
bt_upgrade@o@: $(srcdir)/btree/bt_upgrade.c
	 $(CC) $(CFLAGS) $?
bt_verify@o@: $(srcdir)/btree/bt_verify.c
	 $(CC) $(CFLAGS) $?
btree_auto@o@: $(srcdir)/btree/btree_auto.c
	 $(CC) $(CFLAGS) $?
crdel_auto@o@: $(srcdir)/db/crdel_auto.c
	 $(CC) $(CFLAGS) $?
crdel_rec@o@: $(srcdir)/db/crdel_rec.c
	 $(CC) $(CFLAGS) $?
crypto@o@: $(srcdir)/crypto/crypto.c
	 $(CC) $(CFLAGS) $?
crypto_stub@o@: $(srcdir)/common/crypto_stub.c
	 $(CC) $(CFLAGS) $?
db185@o@: $(srcdir)/db185/db185.c
	 $(CC) $(CFLAGS) $?
db@o@: $(srcdir)/db/db.c
	 $(CC) $(CFLAGS) $?
db_am@o@: $(srcdir)/db/db_am.c
	 $(CC) $(CFLAGS) $?
db_auto@o@: $(srcdir)/db/db_auto.c
	 $(CC) $(CFLAGS) $?
db_byteorder@o@: $(srcdir)/common/db_byteorder.c
	 $(CC) $(CFLAGS) $?
db_cam@o@: $(srcdir)/db/db_cam.c
	 $(CC) $(CFLAGS) $?
db_conv@o@: $(srcdir)/db/db_conv.c
	 $(CC) $(CFLAGS) $?
db_dispatch@o@: $(srcdir)/db/db_dispatch.c
	 $(CC) $(CFLAGS) $?
db_dup@o@: $(srcdir)/db/db_dup.c
	 $(CC) $(CFLAGS) $?
db_err@o@: $(srcdir)/common/db_err.c
	 $(CC) $(CFLAGS) $?
db_getlong@o@: $(srcdir)/common/db_getlong.c
	 $(CC) $(CFLAGS) $?
db_idspace@o@: $(srcdir)/common/db_idspace.c
	 $(CC) $(CFLAGS) $?
db_iface@o@: $(srcdir)/db/db_iface.c
	 $(CC) $(CFLAGS) $?
db_join@o@: $(srcdir)/db/db_join.c
	 $(CC) $(CFLAGS) $?
db_log2@o@: $(srcdir)/common/db_log2.c
	 $(CC) $(CFLAGS) $?
db_meta@o@: $(srcdir)/db/db_meta.c
	 $(CC) $(CFLAGS) $?
db_method@o@: $(srcdir)/db/db_method.c
	 $(CC) $(CFLAGS) $?
db_open@o@: $(srcdir)/db/db_open.c
	 $(CC) $(CFLAGS) $?
db_overflow@o@: $(srcdir)/db/db_overflow.c
	 $(CC) $(CFLAGS) $?
db_ovfl_vrfy@o@: $(srcdir)/db/db_ovfl_vrfy.c
	 $(CC) $(CFLAGS) $?
db_pr@o@: $(srcdir)/db/db_pr.c
	 $(CC) $(CFLAGS) $?
db_rec@o@: $(srcdir)/db/db_rec.c
	 $(CC) $(CFLAGS) $?
db_reclaim@o@: $(srcdir)/db/db_reclaim.c
	 $(CC) $(CFLAGS) $?
db_rename@o@: $(srcdir)/db/db_rename.c
	 $(CC) $(CFLAGS) $?
db_remove@o@: $(srcdir)/db/db_remove.c
	 $(CC) $(CFLAGS) $?
db_ret@o@: $(srcdir)/db/db_ret.c
	 $(CC) $(CFLAGS) $?
db_salloc@o@: $(srcdir)/env/db_salloc.c
	 $(CC) $(CFLAGS) $?
db_shash@o@: $(srcdir)/env/db_shash.c
	 $(CC) $(CFLAGS) $?
db_truncate@o@: $(srcdir)/db/db_truncate.c
	 $(CC) $(CFLAGS) $?
db_upg@o@: $(srcdir)/db/db_upg.c
	 $(CC) $(CFLAGS) $?
db_upg_opd@o@: $(srcdir)/db/db_upg_opd.c
	 $(CC) $(CFLAGS) $?
db_vrfy@o@: $(srcdir)/db/db_vrfy.c
	 $(CC) $(CFLAGS) $?
db_vrfyutil@o@: $(srcdir)/db/db_vrfyutil.c
	 $(CC) $(CFLAGS) $?
db_vrfy_stub@o@: $(srcdir)/db/db_vrfy_stub.c
	$(CC) $(CFLAGS) $?
dbm@o@: $(srcdir)/dbm/dbm.c
	 $(CC) $(CFLAGS) $?
dbreg@o@: $(srcdir)/dbreg/dbreg.c
	 $(CC) $(CFLAGS) $?
dbreg_auto@o@: $(srcdir)/dbreg/dbreg_auto.c
	 $(CC) $(CFLAGS) $?
dbreg_rec@o@: $(srcdir)/dbreg/dbreg_rec.c
	 $(CC) $(CFLAGS) $?
dbreg_util@o@: $(srcdir)/dbreg/dbreg_util.c
	 $(CC) $(CFLAGS) $?
env_file@o@: $(srcdir)/env/env_file.c
	 $(CC) $(CFLAGS) $?
env_method@o@: $(srcdir)/env/env_method.c
	 $(CC) $(CFLAGS) $?
env_open@o@: $(srcdir)/env/env_open.c
	 $(CC) $(CFLAGS) $?
env_recover@o@: $(srcdir)/env/env_recover.c
	 $(CC) $(CFLAGS) $?
env_region@o@: $(srcdir)/env/env_region.c
	 $(CC) $(CFLAGS) $?
fileops_auto@o@: $(srcdir)/fileops/fileops_auto.c
	 $(CC) $(CFLAGS) $?
fop_basic@o@: $(srcdir)/fileops/fop_basic.c
	 $(CC) $(CFLAGS) $?
fop_rec@o@: $(srcdir)/fileops/fop_rec.c
	 $(CC) $(CFLAGS) $?
fop_util@o@: $(srcdir)/fileops/fop_util.c
	 $(CC) $(CFLAGS) $?
hash@o@: $(srcdir)/hash/hash.c
	 $(CC) $(CFLAGS) $?
hash_auto@o@: $(srcdir)/hash/hash_auto.c
	 $(CC) $(CFLAGS) $?
hash_conv@o@: $(srcdir)/hash/hash_conv.c
	 $(CC) $(CFLAGS) $?
hash_dup@o@: $(srcdir)/hash/hash_dup.c
	 $(CC) $(CFLAGS) $?
hash_func@o@: $(srcdir)/hash/hash_func.c
	 $(CC) $(CFLAGS) $?
hash_meta@o@: $(srcdir)/hash/hash_meta.c
	 $(CC) $(CFLAGS) $?
hash_method@o@: $(srcdir)/hash/hash_method.c
	 $(CC) $(CFLAGS) $?
hash_open@o@: $(srcdir)/hash/hash_open.c
	 $(CC) $(CFLAGS) $?
hash_page@o@: $(srcdir)/hash/hash_page.c
	 $(CC) $(CFLAGS) $?
hash_rec@o@: $(srcdir)/hash/hash_rec.c
	 $(CC) $(CFLAGS) $?
hash_reclaim@o@: $(srcdir)/hash/hash_reclaim.c
	 $(CC) $(CFLAGS) $?
hash_stat@o@: $(srcdir)/hash/hash_stat.c
	 $(CC) $(CFLAGS) $?
hash_stub@o@: $(srcdir)/hash/hash_stub.c
	 $(CC) $(CFLAGS) $?
hash_upgrade@o@: $(srcdir)/hash/hash_upgrade.c
	 $(CC) $(CFLAGS) $?
hash_verify@o@: $(srcdir)/hash/hash_verify.c
	 $(CC) $(CFLAGS) $?
hmac@o@: $(srcdir)/hmac/hmac.c
	 $(CC) $(CFLAGS) $?
hsearch@o@: $(srcdir)/hsearch/hsearch.c
	 $(CC) $(CFLAGS) $?
lock@o@: $(srcdir)/lock/lock.c
	 $(CC) $(CFLAGS) $?
lock_deadlock@o@:$(srcdir)/lock/lock_deadlock.c
	 $(CC) $(CFLAGS) $?
lock_method@o@:$(srcdir)/lock/lock_method.c
	 $(CC) $(CFLAGS) $?
lock_region@o@:$(srcdir)/lock/lock_region.c
	 $(CC) $(CFLAGS) $?
lock_stat@o@:$(srcdir)/lock/lock_stat.c
	 $(CC) $(CFLAGS) $?
lock_util@o@:$(srcdir)/lock/lock_util.c
	 $(CC) $(CFLAGS) $?
log@o@: $(srcdir)/log/log.c
	 $(CC) $(CFLAGS) $?
log_archive@o@: $(srcdir)/log/log_archive.c
	 $(CC) $(CFLAGS) $?
log_compare@o@: $(srcdir)/log/log_compare.c
	 $(CC) $(CFLAGS) $?
log_get@o@: $(srcdir)/log/log_get.c
	 $(CC) $(CFLAGS) $?
log_method@o@: $(srcdir)/log/log_method.c
	 $(CC) $(CFLAGS) $?
log_put@o@: $(srcdir)/log/log_put.c
	 $(CC) $(CFLAGS) $?
mp_alloc@o@: $(srcdir)/mp/mp_alloc.c
	 $(CC) $(CFLAGS) $?
mp_bh@o@: $(srcdir)/mp/mp_bh.c
	 $(CC) $(CFLAGS) $?
mp_fget@o@: $(srcdir)/mp/mp_fget.c
	 $(CC) $(CFLAGS) $?
mp_fopen@o@: $(srcdir)/mp/mp_fopen.c
	 $(CC) $(CFLAGS) $?
mp_fput@o@: $(srcdir)/mp/mp_fput.c
	 $(CC) $(CFLAGS) $?
mp_fset@o@: $(srcdir)/mp/mp_fset.c
	 $(CC) $(CFLAGS) $?
mp_method@o@: $(srcdir)/mp/mp_method.c
	 $(CC) $(CFLAGS) $?
mp_region@o@: $(srcdir)/mp/mp_region.c
	 $(CC) $(CFLAGS) $?
mp_register@o@: $(srcdir)/mp/mp_register.c
	 $(CC) $(CFLAGS) $?
mp_stat@o@: $(srcdir)/mp/mp_stat.c
	 $(CC) $(CFLAGS) $?
mp_sync@o@: $(srcdir)/mp/mp_sync.c
	 $(CC) $(CFLAGS) $?
mp_trickle@o@: $(srcdir)/mp/mp_trickle.c
	 $(CC) $(CFLAGS) $?
mt19937db@o@: $(srcdir)/crypto/mersenne/mt19937db.c
	 $(CC) $(CFLAGS) $?
mut_fcntl@o@: $(srcdir)/mutex/mut_fcntl.c
	 $(CC) $(CFLAGS) $?
mut_pthread@o@: $(srcdir)/mutex/mut_pthread.c
	 $(CC) $(CFLAGS) $?
mut_tas@o@: $(srcdir)/mutex/mut_tas.c
	 $(CC) $(CFLAGS) $?
mut_win32@o@: $(srcdir)/mutex/mut_win32.c
	 $(CC) $(CFLAGS) $?
mutex@o@: $(srcdir)/mutex/mutex.c
	 $(CC) $(CFLAGS) $?
os_abs@o@: $(srcdir)/@OSDIR@/os_abs.c
	 $(CC) $(CFLAGS) $?
os_alloc@o@: $(srcdir)/os/os_alloc.c
	 $(CC) $(CFLAGS) $?
os_clock@o@: $(srcdir)/@OSDIR@/os_clock.c
	 $(CC) $(CFLAGS) $?
os_config@o@: $(srcdir)/@OSDIR@/os_config.c
	 $(CC) $(CFLAGS) $?
os_dir@o@: $(srcdir)/@OSDIR@/os_dir.c
	 $(CC) $(CFLAGS) $?
os_errno@o@: $(srcdir)/@OSDIR@/os_errno.c
	 $(CC) $(CFLAGS) $?
os_fid@o@: $(srcdir)/@OSDIR@/os_fid.c
	 $(CC) $(CFLAGS) $?
os_fsync@o@: $(srcdir)/@OSDIR@/os_fsync.c
	 $(CC) $(CFLAGS) $?
os_id@o@: $(srcdir)/os/os_id.c
	 $(CC) $(CFLAGS) $?
os_handle@o@: $(srcdir)/@OSDIR@/os_handle.c
	 $(CC) $(CFLAGS) $?
os_map@o@: $(srcdir)/@OSDIR@/os_map.c
	 $(CC) $(CFLAGS) $?
os_method@o@: $(srcdir)/os/os_method.c
	 $(CC) $(CFLAGS) $?
os_oflags@o@: $(srcdir)/os/os_oflags.c
	 $(CC) $(CFLAGS) $?
os_open@o@: $(srcdir)/@OSDIR@/os_open.c
	 $(CC) $(CFLAGS) $?
os_region@o@: $(srcdir)/os/os_region.c
	 $(CC) $(CFLAGS) $?
os_rename@o@: $(srcdir)/@OSDIR@/os_rename.c
	 $(CC) $(CFLAGS) $?
os_root@o@: $(srcdir)/os/os_root.c
	 $(CC) $(CFLAGS) $?
os_rpath@o@: $(srcdir)/os/os_rpath.c
	 $(CC) $(CFLAGS) $?
os_rw@o@: $(srcdir)/@OSDIR@/os_rw.c
	 $(CC) $(CFLAGS) $?
os_seek@o@: $(srcdir)/@OSDIR@/os_seek.c
	 $(CC) $(CFLAGS) $?
os_sleep@o@: $(srcdir)/@OSDIR@/os_sleep.c
	 $(CC) $(CFLAGS) $?
os_spin@o@: $(srcdir)/@OSDIR@/os_spin.c
	 $(CC) $(CFLAGS) $?
os_stat@o@: $(srcdir)/@OSDIR@/os_stat.c
	 $(CC) $(CFLAGS) $?
os_tmpdir@o@: $(srcdir)/os/os_tmpdir.c
	 $(CC) $(CFLAGS) $?
os_unlink@o@: $(srcdir)/os/os_unlink.c
	 $(CC) $(CFLAGS) $?
qam@o@: $(srcdir)/qam/qam.c
	 $(CC) $(CFLAGS) $?
qam_auto@o@: $(srcdir)/qam/qam_auto.c
	 $(CC) $(CFLAGS) $?
qam_conv@o@: $(srcdir)/qam/qam_conv.c
	 $(CC) $(CFLAGS) $?
qam_files@o@: $(srcdir)/qam/qam_files.c
	 $(CC) $(CFLAGS) $?
qam_method@o@: $(srcdir)/qam/qam_method.c
	 $(CC) $(CFLAGS) $?
qam_open@o@: $(srcdir)/qam/qam_open.c
	 $(CC) $(CFLAGS) $?
qam_rec@o@: $(srcdir)/qam/qam_rec.c
	 $(CC) $(CFLAGS) $?
qam_stat@o@: $(srcdir)/qam/qam_stat.c
	 $(CC) $(CFLAGS) $?
qam_stub@o@: $(srcdir)/qam/qam_stub.c
	 $(CC) $(CFLAGS) $?
qam_upgrade@o@: $(srcdir)/qam/qam_upgrade.c
	 $(CC) $(CFLAGS) $?
qam_verify@o@: $(srcdir)/qam/qam_verify.c
	 $(CC) $(CFLAGS) $?
rep_method@o@: $(srcdir)/rep/rep_method.c
	 $(CC) $(CFLAGS) $?
rep_record@o@: $(srcdir)/rep/rep_record.c
	 $(CC) $(CFLAGS) $?
rep_region@o@: $(srcdir)/rep/rep_region.c
	 $(CC) $(CFLAGS) $?
rep_stub@o@: $(srcdir)/rep/rep_stub.c
	 $(CC) $(CFLAGS) $?
rep_util@o@: $(srcdir)/rep/rep_util.c
	 $(CC) $(CFLAGS) $?
rijndael-alg-fst@o@: $(srcdir)/crypto/rijndael/rijndael-alg-fst.c
	$(CC) $(CFLAGS) $?
rijndael-api-fst@o@: $(srcdir)/crypto/rijndael/rijndael-api-fst.c
	$(CC) $(CFLAGS) $?
sha1@o@: $(srcdir)/hmac/sha1.c
	$(CC) $(CFLAGS) $?
txn@o@: $(srcdir)/txn/txn.c
	 $(CC) $(CFLAGS) $?
txn_auto@o@: $(srcdir)/txn/txn_auto.c
	 $(CC) $(CFLAGS) $?
txn_method@o@: $(srcdir)/txn/txn_method.c
	 $(CC) $(CFLAGS) $?
txn_rec@o@: $(srcdir)/txn/txn_rec.c
	 $(CC) $(CFLAGS) $?
txn_recover@o@: $(srcdir)/txn/txn_recover.c
	 $(CC) $(CFLAGS) $?
txn_region@o@: $(srcdir)/txn/txn_region.c
	 $(CC) $(CFLAGS) $?
txn_stat@o@: $(srcdir)/txn/txn_stat.c
	 $(CC) $(CFLAGS) $?
txn_util@o@: $(srcdir)/txn/txn_util.c
	 $(CC) $(CFLAGS) $?
util_cache@o@: $(srcdir)/common/util_cache.c
	 $(CC) $(CFLAGS) $?
util_log@o@: $(srcdir)/common/util_log.c
	 $(CC) $(CFLAGS) $?
util_sig@o@: $(srcdir)/common/util_sig.c
	 $(CC) $(CFLAGS) $?
uts4_cc@o@: $(srcdir)/mutex/uts4_cc.s
	$(AS) $(ASFLAGS) -o $@ $?
xa@o@: $(srcdir)/xa/xa.c
	 $(CC) $(CFLAGS) $?
xa_db@o@: $(srcdir)/xa/xa_db.c
	 $(CC) $(CFLAGS) $?
xa_map@o@: $(srcdir)/xa/xa_map.c
	 $(CC) $(CFLAGS) $?

##################################################
# C++ API build rules.
##################################################
cxx_db@o@: $(srcdir)/cxx/cxx_db.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_dbc@o@: $(srcdir)/cxx/cxx_dbc.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_dbt@o@: $(srcdir)/cxx/cxx_dbt.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_env@o@: $(srcdir)/cxx/cxx_env.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_except@o@: $(srcdir)/cxx/cxx_except.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_lock@o@: $(srcdir)/cxx/cxx_lock.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_logc@o@: $(srcdir)/cxx/cxx_logc.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_mpool@o@: $(srcdir)/cxx/cxx_mpool.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_txn@o@: $(srcdir)/cxx/cxx_txn.cpp
	$(CXX) $(CXXFLAGS) $?
cxx_multi@o@: $(srcdir)/cxx/cxx_multi.cpp
	$(CXX) $(CXXFLAGS) $?

##################################################
# Java API build rules.
##################################################
db_java_wrap@o@::$(srcdir)/libdb_java/db_java_wrap.c
	$(CC) $(CFLAGS) $?

##################################################
# Tcl API build rules.
##################################################
tcl_compat@o@: $(srcdir)/tcl/tcl_compat.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_db@o@: $(srcdir)/tcl/tcl_db.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_db_pkg@o@: $(srcdir)/tcl/tcl_db_pkg.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_dbcursor@o@: $(srcdir)/tcl/tcl_dbcursor.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_env@o@: $(srcdir)/tcl/tcl_env.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_internal@o@: $(srcdir)/tcl/tcl_internal.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_lock@o@: $(srcdir)/tcl/tcl_lock.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_log@o@: $(srcdir)/tcl/tcl_log.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_mp@o@: $(srcdir)/tcl/tcl_mp.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_rep@o@: $(srcdir)/tcl/tcl_rep.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_txn@o@: $(srcdir)/tcl/tcl_txn.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?
tcl_util@o@: $(srcdir)/tcl/tcl_util.c
	$(CC) $(CFLAGS) $(TCFLAGS) $?

##################################################
# RPC build rules.
##################################################
# RPC client files
client@o@: $(srcdir)/rpc_client/client.c
	$(CC) $(CFLAGS) $?
db_server_clnt@o@: $(srcdir)/rpc_client/db_server_clnt.c
	$(CC) $(CFLAGS) $?
gen_client@o@: $(srcdir)/rpc_client/gen_client.c
	$(CC) $(CFLAGS) $?
gen_client_ret@o@: $(srcdir)/rpc_client/gen_client_ret.c
	$(CC) $(CFLAGS) $?

# RPC server files
db_server_proc@o@: $(srcdir)/rpc_server/c/db_server_proc.c
	$(CC) $(CFLAGS) $?
db_server_svc@o@: $(srcdir)/rpc_server/c/db_server_svc.c
	$(CC) $(CFLAGS) $?
db_server_util@o@: $(srcdir)/rpc_server/c/db_server_util.c
	$(CC) $(CFLAGS) $?
db_server_xdr@o@: $(srcdir)/rpc_server/c/db_server_xdr.c
	$(CC) $(CFLAGS) $?
gen_db_server@o@: $(srcdir)/rpc_server/c/gen_db_server.c
	$(CC) $(CFLAGS) $?
db_server_cxxproc@o@: $(srcdir)/rpc_server/cxx/db_server_cxxproc.cpp
	$(CXX) $(CXXFLAGS) $?
db_server_cxxutil@o@: $(srcdir)/rpc_server/cxx/db_server_cxxutil.cpp
	$(CXX) $(CXXFLAGS) $?

##################################################
# Utility build rules.
##################################################
db_archive@o@: $(srcdir)/db_archive/db_archive.c
	$(CC) $(CFLAGS) $?
db_checkpoint@o@: $(srcdir)/db_checkpoint/db_checkpoint.c
	$(CC) $(CFLAGS) $?
db_deadlock@o@: $(srcdir)/db_deadlock/db_deadlock.c
	$(CC) $(CFLAGS) $?
db_dump@o@: $(srcdir)/db_dump/db_dump.c
	$(CC) $(CFLAGS) $?
db_dump185@o@: $(srcdir)/db_dump185/db_dump185.c
	$(CC) $(DB185INC) $?
db_load@o@: $(srcdir)/db_load/db_load.c
	$(CC) $(CFLAGS) $?
db_printlog@o@: $(srcdir)/db_printlog/db_printlog.c
	$(CC) $(CFLAGS) $?
db_recover@o@: $(srcdir)/db_recover/db_recover.c
	$(CC) $(CFLAGS) $?
db_stat@o@: $(srcdir)/db_stat/db_stat.c
	$(CC) $(CFLAGS) $?
db_upgrade@o@: $(srcdir)/db_upgrade/db_upgrade.c
	$(CC) $(CFLAGS) $?
db_verify@o@: $(srcdir)/db_verify/db_verify.c
	$(CC) $(CFLAGS) $?

##################################################
# C library replacement files.
##################################################
getcwd@o@: $(srcdir)/clib/getcwd.c
	$(CC) $(CFLAGS) $?
getopt@o@: $(srcdir)/clib/getopt.c
	$(CC) $(CFLAGS) $?
memcmp@o@: $(srcdir)/clib/memcmp.c
	$(CC) $(CFLAGS) $?
memcpy@o@: $(srcdir)/clib/memmove.c
	$(CC) -DMEMCOPY $(CFLAGS) $? -o $@
memmove@o@: $(srcdir)/clib/memmove.c
	$(CC) -DMEMMOVE $(CFLAGS) $?
raise@o@: $(srcdir)/clib/raise.c
	$(CC) $(CFLAGS) $?
strcasecmp@o@: $(srcdir)/clib/strcasecmp.c
	$(CC) $(CFLAGS) $?
strdup@o@: $(srcdir)/clib/strdup.c
	$(CC) $(CFLAGS) $?
snprintf@o@: $(srcdir)/clib/snprintf.c
	$(CC) $(CFLAGS) $?
strerror@o@: $(srcdir)/clib/strerror.c
	$(CC) $(CFLAGS) $?
vsnprintf@o@: $(srcdir)/clib/vsnprintf.c
	$(CC) $(CFLAGS) $?
